<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Document</title>
        <style media="screen">
            /*label,*/

            select,
            option,
            input {
                padding: 2px;
                height: 1.5em;
                border: 1px solid gray;
                border-radius: 3px;
            }

            button {
                padding: 5px 10px;
                border-radius: 3px;
                border: 1px solid gray;
                /*height: 2em;*/
            }

            select {
                height: 2.5em;
            }

        </style>
    </head>
    <body>
        <label for="dataid">資料編號</label>
        <select name="dataid" id="dataid">
                <option value="F-D0047-001">宜蘭縣未來2天天氣預報</option>
                <option value="F-D0047-005">桃園市未來2天天氣預報</option>
                <option value="F-D0047-009">新竹縣未來2天天氣預報</option>
                <option value="F-D0047-013">苗栗縣未來2天天氣預報</option>
                <option value="F-D0047-017">彰化縣未來2天天氣預報</option>
                <option value="F-D0047-021">南投縣未來2天天氣預報</option>
                <option value="F-D0047-025">雲林縣未來2天天氣預報</option>
                <option value="F-D0047-029">嘉義縣未來2天天氣預報</option>
                <option value="F-D0047-033">屏東縣未來2天天氣預報</option>
                <option value="F-D0047-037">臺東縣未來2天天氣預報</option>
                <option value="F-D0047-041">花蓮縣未來2天天氣預報</option>
                <option value="F-D0047-045">澎湖縣未來2天天氣預報</option>
                <option value="F-D0047-049">基隆市未來2天天氣預報</option>
                <option value="F-D0047-053">新竹市未來2天天氣預報</option>
                <option value="F-D0047-057">嘉義市未來2天天氣預報</option>
                <option value="F-D0047-061">臺北市未來2天天氣預報</option>
                <option value="F-D0047-065">高雄市未來2天天氣預報</option>
                <option value="F-D0047-069">新北市未來2天天氣預報</option>
                <option value="F-D0047-073">臺中市未來2天天氣預報</option>
                <option value="F-D0047-077">臺南市未來2天天氣預報</option>
                <option value="F-D0047-081">連江縣未來2天天氣預報</option>
                <option value="F-D0047-085">金門縣未來2天天氣預報</option>
                <option value="F-D0047-089">台灣未來2天天氣預報</option>
            </select>
        <label for="authorizationkey">授權碼</label><input type="text" id="authorizationkey" value="">
        <button onclick="send()">click</button>
        <pre id="content"></pre>
        <script type="text/javascript">
        //'CWB-81E3A4E0-7B70-47EF-B53C-148079419530';


        function send () {
            const dataid = document.querySelector('#dataid').value;
            const authorizationkey = document.querySelector('#authorizationkey').value;

            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    console.log(this.responseText);
                    document.querySelector("#content").innerHTML = this.responseText.toString();
                }
            };

            const url = `https://opendata.cwb.gov.tw/opendataapi?dataid=${dataid}&authorizationkey=${authorizationkey}`
            xhttp.open("GET", url, true);
            xhttp.send();
        }
        </script>
    </body>
</html>
